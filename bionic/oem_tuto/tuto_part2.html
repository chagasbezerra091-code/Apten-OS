<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AptenOS OEM Tutorial ‚Äì Parte 2: Compila√ß√£o e Build</title>
    <link rel="stylesheet" href="style.css"> <style>
        /* Estilos b√°sicos reintroduzidos para visualiza√ß√£o imediata */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background-color: #f4f7f9; color: #333; }
        .container { max-width: 1000px; margin: auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { color: #0056b3; border-bottom: 3px solid #0056b3; padding-bottom: 10px; margin-top: 0; }
        h2 { color: #333; border-left: 5px solid #00aaff; padding-left: 10px; margin-top: 30px; }
        h3 { color: #555; margin-top: 20px; }
        code { background-color: #eee; padding: 2px 4px; border-radius: 3px; font-family: 'Consolas', 'Monaco', monospace; }
        pre { background-color: #272822; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 0.9em; }
        .alert-info { background-color: #d1ecf1; border-left: 5px solid #bee5eb; padding: 15px; margin: 20px 0; border-radius: 4px; color: #0c5460; }
        .alert-success { background-color: #d4edda; border-left: 5px solid #c3e6cb; padding: 15px; margin: 20px 0; border-radius: 4px; color: #155724; }
        ol, ul { padding-left: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öôÔ∏è AptenOS OEM Tutorial ‚Äì Parte 2: Compila√ß√£o do Sistema</h1>

        <p>A Parte 1 estabeleceu seu ambiente de desenvolvimento e sincronizou o c√≥digo-fonte. Esta parte ir√° cobrir o processo de compila√ß√£o, que transforma o c√≥digo-fonte em uma imagem de sistema pronta para ser instalada em seu hardware.</p>

        <hr>

        <h2>I. üå≥ Preparando o Ambiente e Vari√°veis</h2>

        <p>Antes de come√ßar a compila√ß√£o, voc√™ deve navegar para o diret√≥rio raiz do c√≥digo-fonte e carregar as vari√°veis de ambiente necess√°rias:</p>

        <ol>
            <li>Navegue para o diret√≥rio de trabalho criado na Parte 1:
            <pre><code>cd ~/aptenos_oem_workspace
</code></pre></li>
            <li>Execute o script de configura√ß√£o de ambiente (Este script inicializa caminhos, vari√°veis e o ambiente Python/Java):
            <pre><code>source build/envsetup.sh
</code></pre>
            <div class="alert-info">
                <strong>Importante:</strong> Voc√™ deve executar este comando (<code>source build/envsetup.sh</code>) **toda vez** que iniciar uma nova sess√£o de terminal que ser√° usada para compilar o AptenOS.
            </div>
            </li>
        </ol>

        <hr>

        <h2>II. üéØ Sele√ß√£o do Alvo de Build (Target)</h2>

        <p>O AptenOS suporta diferentes arquiteturas e configura√ß√µes de dispositivo. Voc√™ deve selecionar o "target" (alvo) que corresponde ao seu hardware OEM espec√≠fico. O comando <code>lunch</code> √© usado para este prop√≥sito.</p>

        <h3>A. Listando Op√ß√µes de Alvo</h3>

        <p>Para ver todos os alvos dispon√≠veis para compila√ß√£o (seja para emula√ß√£o ou hardware espec√≠fico):</p>
        <pre><code>lunch
</code></pre>
        <p>O terminal exibir√° uma lista numerada de alvos dispon√≠veis (ex: <code>aptenos_x86-userdebug</code>, <code>full_aptenos_device_name-eng</code>, etc.).</p>

        <h3>B. Escolhendo o Alvo OEM</h3>

        <p>Selecione o alvo de build que corresponde ao seu dispositivo. Use o n√∫mero ou o nome completo. Por exemplo, se o seu hardware √© o <code>aptenos_board_123</code>:</p>
        <pre><code>lunch aptenos_board_123-userdebug
</code></pre>
        <ul>
            <li>**<code>-user</code>**: Destinado √† produ√ß√£o final, com acesso root desabilitado.</li>
            <li>**<code>-userdebug</code>**: Recomendado para OEMs; possui acesso root e ferramentas de debug habilitadas.</li>
            <li>**<code>-eng</code>**: Destinado a engenheiros de desenvolvimento, com configura√ß√µes de depura√ß√£o pesadas.</li>
        </ul>

        <hr>

        <h2>III. üõ†Ô∏è Executando a Compila√ß√£o</h2>

        <p>Com o alvo selecionado, voc√™ est√° pronto para iniciar a compila√ß√£o. O comando <code>make</code> (ou <code>m</code>) √© usado.</p>

        <ol>
            <li>Inicie a compila√ß√£o completa:
            <pre><code>m -j$(nproc)
</code></pre></li>
            <li>**Entendendo o comando:**
                <ul>
                    <li><code>m</code>: Um atalho para o comando <code>make</code> que funciona no ambiente de build do AptenOS.</li>
                    <li><code>-j$(nproc)</code>: Especifica o n√∫mero de tarefas paralelas a serem usadas para a compila√ß√£o, otimizando o tempo. <code>nproc</code> detecta automaticamente o n√∫mero de n√∫cleos de CPU dispon√≠veis.</li>
                </ul>
            </li>
        </ol>

        <div class="alert-info">
            <strong>Dura√ß√£o:</strong> A primeira compila√ß√£o completa (full clean build) pode levar de **1 a 4 horas** ou mais, dependendo da velocidade do seu SSD e do n√∫mero de n√∫cleos de CPU. Compila√ß√µes subsequentes (incrementais) ser√£o muito mais r√°pidas.
        </div>

        <h3>A. Resultado de Sucesso</h3>

        <p>Uma compila√ß√£o bem-sucedida terminar√° com uma mensagem semelhante a esta:</p>
        <pre class="alert-success"><code>#### build completed successfully (Xh Ym Zs) ####</code></pre>

        <hr>

        <h2>IV. üì¶ Localizando os Artefatos de Sa√≠da</h2>

        <p>Ap√≥s a compila√ß√£o, todos os arquivos de imagem gerados (imagens de boot, sistema, etc.) ser√£o armazenados em um diret√≥rio espec√≠fico:</p>

        <pre><code>$OUT
# ou, se a vari√°vel $OUT n√£o estiver definida:
~/aptenos_oem_workspace/out/target/product/&lt;DEVICE_NAME&gt;
</code></pre>

        <p>Os arquivos principais que voc√™ precisar√° para fazer o flash no seu dispositivo OEM incluem:</p>
        <ul>
            <li><code>boot.img</code> (Kernel e Ramdisk)</li>
            <li><code>system.img</code> (Parti√ß√£o do Sistema Operacional)</li>
            <li><code>userdata.img</code> (Parti√ß√£o de Dados do Usu√°rio)</li>
            <li><code>aptenos-image-&lt;DEVICE_NAME&gt;.zip</code> (Pacote completo para flashing/OTA)</li>
        </ul>

        <hr>

        <h2>‚è≠Ô∏è Pr√≥ximos Passos (Parte 3 do Tutorial)</h2>

        <p>A Parte 3 ir√° abordar o processo de **Flashing (Grava√ß√£o)** das imagens de sistema no hardware de teste e as primeiras etapas de personaliza√ß√£o.</p>

        <a href="tuto_part1.html">‚Üê Voltar √† Parte 1: Configura√ß√£o do Ambiente</a>

    </div>
</body>
</html>
